## 1. Entity와 API의 결합

- 문제점 : Entity를 Controller를 그대로 노출하면, API와 Entity 간의 결합도가 높아져서 코드를 변경할 시 유연성이 떨어지고, 유지보수가 어려워진다.
  Entity 구조 또는 필드가 변경되면 해당 Entity를 사용하는 모든 API에서 수정이 필요하게 되기 때문에 확장성과 변경에 취약해진다.
- 해결점 : DTO를 도입하게 되면 API의 요청과 응답에 필요한 데이터만을 전달할 수 있기 때문에, Entity와 API의 결합도를 줄이고, 변경에 대한 유연성을 확보할 수
  있다.

## 2. 프로덕션 환경에서의 성능 문제 (OSIV  : Open Session in View)

- 문제점 : 프로덕션 환경에서는 성능을 고려해 OSIV를 false 로 설정하는 경우가 많다.
  이때 Entity를 Controller에서 직접 반환하게 되면 트랜잭션이 종료된 후에도 Lazy Loading이 필요하면, LazyInitializationException이
  발생할 수 있다.
- 해결책 : DTO를 사용하면, 필요한 데이터를 명시적으로 로딩해 전송할 수 있어 성능 문제를 피할 수 있다.
  DTO는 데이터의 전송에 필요한 것만을 가져오기 때문에 성능 최적화가 가능하다.

## 3. 양방향 연관관계 시 순환 참조 문제

- 문제점 : 양방향 연관관계를 설정한 Entity를 그대로 반환하게 되면 JSON 직렬화 시 순환 참조가 발생할 수 있다.
    - 예를 들어 A 엔티티에서 B 엔티티를 참조하고, B에서 A를 참조하는 경우, 무한 루프가 발생할 수 있다.
- 해결책 : DTO를 사용하면 순환 참조를 해결할 수 있다. DTO에서 필요한 데이터만을 선택적으로 반환하고, 연관된 객체를 DTO로 변환해 순환 참조를 피할 수 있다.

## 4. 민감한 데이터 노출

- 문제점 : Entity를 그대로 반환하면, 민감한 데이터가 노출될 수 있다. 보안상 큰 위험을 가져온다.
- 해결책 : DTO를 사용해 민감한 데이터를 필터링하고, 필요한 정보만을 외부에 제공할 수 있다.
    - 예를들어, 비밀번호나 인증 관련 데이터를 DTO에서 제외해 보안을 강화할 수 있다.

## 5. DTO 도입의 장점

- 보일러플레이트 코드 증가 : DTO를 사용하면 초기에는 보일러플레이트 코드가 많아지고, 클래스가 추가되지만, 이러한 구조는 장기적으로 코드 유지보수에 유리하다.
- 장점
    1. 유연성
    2. 보안성
    3. 성능 최적화
    4. 순환 참조 방지

<aside>

### 결론

DTO를 도입하면 코드가 다소 복잡해지고, 보일러플레이트 코드가 증가하지만, Entity와 API간의 결합도를 낮추고, 성능과 보안성, 유연성 등 여러면에서 이점을 제공한다.

특히, 대규모 시스템이나 보안이 중요한 환경의 경우 DTO의 도입이 필수적이다!

</aside>